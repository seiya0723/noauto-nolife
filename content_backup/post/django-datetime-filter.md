---
title: "【Django】日付、日時で検索・絞り込みをする方法【filter】"
date: 2021-11-06T09:01:37+09:00
draft: True
thumbnail: "images/django.jpg"
categories: [ "サーバーサイド" ]
tags: [ "django","上級者向け" ]
---


『たかだか、日付や日時の検索ぐらい簡単だろう』なんて高を括っていると痛い目にあう。それが日付・日時の扱い。

以下、日付や日時の扱いが難しいと言われる所以。

- Pythonにはdatetime、Djangoにはtimezoneがある
- 日付・日時にはフォーマットがある(フォーマットに即していない物は日付や日時として扱われない)
- DBにイギリス時間で記録するべきか、日本時間で記録するべきか
- クライアントから検索依頼を受けた時刻は、どこのタイムゾーンを基準とするべきか？

とりわけ、フォーマットと時差の考慮がとてもむずかしい。いずれも正しく扱うことができなければ、間違った検索結果が出力され、検索が機能しなくなる。

そこで本記事は、[40分Django簡易掲示板](/post/startup-django/)を元に、日付・日時で検索する機能を実装し、解説する。


## モデル

まずモデル。日時のフィールドと日付のフィールドを追加する。







## テンプレート





## ビュー





## 動かすとこうなる。



## 結論

つまり、DBに記録されるのはUTCであり、イギリス時間。そこから、




参照元:https://docs.djangoproject.com/ja/3.2/topics/i18n/timezones/

