---
title: "MDNのcanvasゲーム(ブロック崩し)の仕組み解説とコード整形【jQueryを使用してさらに短く】"
date: 2021-11-16T10:09:14+09:00
draft: true
thumbnail: "images/js.jpg"
categories: [ "フロントサイド" ]
tags: [ "canvas","JavaScript","jQuery","ゲーム" ]
---


[MDNにcanvasとJavaScriptを使ったブロック崩しゲームのチュートリアル](https://developer.mozilla.org/ja/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript)がある。

基本的なマウスやキーボードの操作、衝突検出などゲーム開発に役立つものが多い反面、コードがやや複雑で見づらい。完成形のコードはこんなにネストしている。

<div class="img-center"><img src="/images/Screenshot from 2021-11-17 07-42-53.png" alt="ネスト深すぎ"></div>

変数の宣言に`let`や`const`を使っておらず、変数名がキャメルケースであり、インデントがスペース2個な点も看過できない。本記事ではこのチュートリアルのコードをなるべく見やすく整形し、場合によってはjQueryを使用しつつ解説していく。

## jQuery不使用でコード整形





## jQueryを使ってコード整形







## 結論

こうしてチュートリアルコードを解体してみると、ゲームとしては不十分な箇所がよくわかる。

- スタート画面がない
- ポーズ機能がない
- パドルに当たった場所がどこであれ角度が同じ
- ゲームオーバーがアラートなので鬱陶しい

特に一度ブラウザで起動したらゲームが即開始され、ポーズもできず、ゲームオーバーしたらアラートが出るので、開発のテストでやっている時には特に鬱陶しく感じるだろう。この問題は早急に解決したいところだ。

できれば、ハイスコアを[Cookieに保存](/post/javascript-cookie/)したり、2回以上当てて壊すブロックを作ったり、アイテムを落としたりするなどのギミックを追加したい。




