---
title: "Vue.js初心者向けQAとベストプラクティスと必要最低限の知識"
date: 2020-12-10T10:50:36+09:00
draft: true
thumbnail: "images/vuejs.jpg"
categories: [ "フロントサイド" ]
tags: [ "vue.js","初心者向け","JavaScript" ]
---

vue.js初心者に捧げる。


## 初心者向けQA

### Q1:vue.jsって結局何なの？

A:フロントサイドのフレームワーク。

### Q2:vue.jsを使うメリットはあるの？

A:うまく設計すれば記述するフロントのコードを大幅に削減でき、大規模ウェブアプリの開発が容易になる。

### Q3:Vue-CLIって何？CDNはダメなの？

A:ローカルでの開発に終止するのであればCDNでもOK、ただしデプロイするときはVue−CLI使わないと動かない

### Q4:vue.jsの主な用途は？どんなものが作れる？

A:ポートフォリオサイトとか簡単なゲームとか。素のHTMLでコーディングした場合、ヘッダーやフッター、サイドバー等の各ページで共通する部分をそれぞれのHTMLに記述(コピペ)する必要があるので保守が難しいが、vue.jsを使えば共通箇所を一箇所にまとめることができる。それ故比較的規模の大きいウェブアプリでも開発しやすい。

### Q5:バインディングって何？

A:vue.jsにおけるバインディングとは、JSとHTMLを繋げること。例えば、JS側で定義した内容をHTMLに反映させる。これが普通のバインディング。一方でHTMLに入力した内容をJSに反映させる後述の`v-model`ディレクティブを使うことで、双方向データバインディングが実現できる。(JSとHTMLでデータをやり取りできる。)

### Q6:コンポーネントって何？

A:ページの構成要素、つまり部品のこと。複数のページで共通するヘッダーやフッターなどはコンポーネント化させることで、一箇所にまとめ、編集と反映を容易にさせる。vue.jsではこのコンポーネントを組み合わせることでページを作る。

### Q7:ディレクティブって何？

A:ディレクティブとは指令の意。つまり、vue.js側からHTMLに任意の処理を行うために記述する。例えば、`v-model`ディレクティブはJS側で初期値を決めることで、HTML側に初期値を反映させることができる。

### Q8:リアクティブって何？

A:即応性(レスポンシブ)、耐障害性、弾力性、メッセージ駆動の4つを兼ね備えた事を言う。ユーザーの変化に直ちに追随でき(即応性)、不具合が発生しにくく(耐障害性)、たとえ障害が発生したとしても障害による影響を最小限とさせ(弾力性)、異なるシステム間でもデータのやりとりを行える(メッセージ駆動)。この4つの要素を兼ね備えたものをリアクティブと呼ぶ。

## 使うディレクティブ

使うディレクティブは

- v-bind
- v-on
- v-model
- v-if系
- v-show
- v-for系

この辺り。以下、解説。

### v-bind

`v-bind`はHTMLタグの属性値に対してJS側で定義した値を入れるためにある。例えば、以下のように、`a`タグの`href`属性にマスタッシュ構文を使って値を入れることはできない。

    <a href="{{ 'link' }}">このリンクは発動しない</a>

代わりに`v-bind`を使ってこのように表現する。

    <a v-bind:href="link">このリンクは発動する</a>

これで`v-bind`というディレクティブを使用し、`:`以降に書かれた属性名(今回は`href`)に対し、linkという値を入れると言う意味になる。ディレクティブの後方の`:`以降に書かれた内容は引数である。vue.jsでは、他のディレクティブもこのように`:`で区切り、その後方に引数を指定する。

また、引数として指定できるのは属性値であるため、`href`属性以外にも、`class`属性や `name`属性などにも指定できる。比較的頻繁に利用するディレクティブなのでまず初めに覚えておきたい。(`v-show`の項にて解説するが、重複してしまうため`v-bind`から`style`属性の指定は厳禁)

### v-on

`v-on`はイベントハンドラである。クリックした時、キーボードを押下した時などに指定した処理を実行する。

`v-on`にJSのコードを記述することもできるが、HTMLにJSの処理を長々と記述するのは避けたい。メソッドをJS側で定義した上でそれを呼び出すように作る。

複数のキーを押して発動させたい場合、こうする。

### v-model

`v-model`は双方向データバインディングを実現させるためのディレクティブ。

通常JS側から生成したデータをHTMLに表示させることはできても、HTML側の処理をJSに送ることはできない。そこで`v-model`ディレクティブを使用する。これでフォーム入力した内容をJSに送信する処理を実現できる。


また、JSは処理を行った上でHTMLに返すことができる。これが双方向データバインディングである。



注意しなければならないのは、`v-model`はフォームの初期値を指定する属性(テキストボックスにおける`value`属性など)と同時に使用するべきではないということである。

`v-model`と`value`属性が同時に存在する場合、`value`属性の値が優先され、`v-model`で指定したプロパティの値が採用されない。これと同様に、`SELECT`タグの`selected`属性や`checkbox`の`checked`属性などのフォームの初期値を指定するための属性は`v-model`と併用してはならない。


### v-if系

`v-if`は指定した値が真であれば表示、偽であれば非表示とするディレクティブである。


`v-if`は後述の`v-show`と違って`display:none`を`style`に指定するのではなく、HTMLごと消し去る点で異なっている。そのため、`v-if`ディレクティブは頻繁に表示非表示を繰り返す必要のある要素には使用してはならない。レンダリングのたびにブラウザに負担が掛かってしまうからである。

一回限り表示非表示を判定して、以後変わらない要素に対しては有効。

### v-show

`v-show`は`v-if`と同様に真であれば表示、偽であれば非表示とするディレクティブである。`v-if`と異なる点は対象要素に`style="display:none"`を指定する事。

`style`属性を指定するディレクティブであるため、属性値の指定ができるディレクティブの`v-bind`を使用しての`style`属性の指定は重複してしまうため、想定外の動作に至る可能性がある。`v-bind`から`style`属性を指定してはいけない。

また、前項との繰り返しになるが、`v-show`は`style="display:none"`を指定する仕様上、何度も表示非表示を繰り返す要素に使用する。

### v-for系

`v-for`はその名の通り、繰り返し処理を実行するディレクティブである。例えば、テンプレートに配列の値を取り出して当てることで、HTMLコーディングの量を減らすことができる。







ちなみに`template`タグは`vue.js`用に用意されたHTMLタグである。


## 使わないディレクティブ

使わないディレクティブは

- v-text
- v-pre
- v-html

主にこの3つ。


### v-text 

`v-text`は指定したタグに値を入れるディレクティブである。要するにマスタッシュ構文である`{{ 値 }}`と同義。

ただし、`v-text`はタグ全体の書き換えしかできず、部分的な編集ができないので汎用性に欠ける点から実質下位互換として判断しても問題はないかと。

サーバーサイドのフレームワーク(DjangoやLaravelなど)で、テンプレートをレンダリングする時、`{{ 値 }}`を指定するので、重複対策として、`v-text`を使用すれば良いという意見もあるが、vue.jsでは下記のようにデリミタを書き換えることができる。

    Vue.options.delimiters = [ "#{", "}" ]

このように指定することで、vue.jsのマスタッシュ構文を`{{ 値 }}`ではなく、`#{ 値 }`として記述する事ができる。

### v-pre

`v-pre`は指定した値をそのまま文字列として表示させる事ができる。しかし、そのまま文字列で表示させることはあるのだろうか？

技術的な事を解説するときぐらいしか使わないので、あえて使ったり、無理して覚えなくて良い

### v-html 

`v-html`はHTMLをそのままHTMLとして表示させることができるが、XSS脆弱性を生み出す根源。

またJS側でもHTMLを書くと、HTMLが分散してしまい保守が難しくなる。そのため、使用しないほうが良い。

## v-on及びv-bindの省略記法は使わない

省略記法を使うと、書き方に一貫性が無くなるだけでなく、可読性にも劣る。入力文字数も1、2文字程度しか変わらないためあえて省略記法をする必要はないかと。



## dataには関数を入れる

公式にも書かれてある問題。関数として定義していないと、それぞれの値が独立せず、すべて同じになってしまう。





## 算出プロパティよりもメソッドを使用する 

速度云々よりもキャッシュ問題で動かなくなってしまう可能性がある。まずは動くことを目標とするべき。先にメソッドで作り、速度面で問題がある場合は算出プロパティを徐々に利用していくほうが安全？

ただし、検索を行う際にはcomputedを使わないと動かない？




